# Model 204

![Текст с описанием картинки](/images4/HW4-1.png)

## Введение + История развития СУБД

Model 204 (M204) - это СУБД, разработанная и коммерциализированная Computer Corporation of America, для компьютера IBM 370 и совместимых мэйнфреймов. Она была анонсирована в 1965 году и впервые развернута в 1972 году. Model 204 включает в себя язык программирования и среду для разработки приложений. Реализованная на языке ассемблер для IBM System/360 и его преемников, M204 может работать с очень большими базами данных и высокими транзакционными нагрузками.

### Описание продукта

Model 204 основана на собственном типе bitmap индекса (особый вид индексов для БД, который хранит большую часть своих данных в виде битовых массивов (bitmaps) и отвечает на большинство запросов, выполняя побитовые логические операции с этими bitmaps), первоначально разработанном Биллом Манном, и сочетает в себе использование технологий хэш-таблиц, B-дерева и секционированного списка записей для оптимизации скорости и эффективности доступа к базе данных.

Рассматриваемая СУБД часто описывается как "одна из трех основных систем баз данных с инвертированным списком," - двумя другими являются ADABAS и ADR's Datacom/DB.

Несмотря на то, что M204 является pre-SQL (или pre-relational) базой данных, файлы здесь можно вручную сопоставить с приблизительными эквивалентами SQL и обеспечить некоторую ограниченную функциональность SQL, используя Model 204 SQL Server.

По популярности среди 400 основных СУБД Model 204 занимает 208-е место (за последний год БД уступила позиции и спустилась больее чем на 20 пунктов):

![Текст с описанием картинки](/images4/HW4-2.png)

А среди Multivalue БД M204 занимает 6-е место из 10 (видно, что за последний год она уступила место дву преследователям: D3 и Northgate Reality):

![Текст с описанием картинки](/images4/HW4-4.png)

### Описание типа

Model 204 относится к типу MultiValue database - это тип  NoSQL и multidimensional database (тип баз данных, оптимимзирующих хранение информации и осуществляющих оперативную аналитическую обработку OLAP), часто считается синонимом PICK (база данных изначально разработанная как операционная система PICK).

Остановимся подробнее на том, что подразумевается под NoSQL. В то время как поставщики реляционных баз данных исторически пытались позиционировать свое программное обеспечение как универсальное решение, NoSQL ориентируется на меньшие подразделения ответственности, где лучший инструмент для данной работы часто является гибким. NoSQL - это открытость и осведомленность об альтернативных, существующих и дополнительных шаблонах и инструментах для управления вашими данными.

Для более подробного ознакомления с базами данных NoSQL можно перейти по [ссылке](https://russianblogs.com/article/30071264964/).

### Пользователи

Model 204 обычно используется в правительственных и военных организациях.

Используется в коммерческих целях в Великобритании компанией  Marks & Spencer. Кроме того, используется в системе налогообложения имущества округа Вентура в Калифорнии, в округе Харрис, Техас; также в системе управления информацией о правосудии и в системе автоматизации школ Департамента образования Нью-Йорка. Неофициальный список прошлых и нынешних пользователей Model 204, составленный в 2010 году, выявил более 140 организаций по всему миру. Начиная с 1986 года эта СУБД использовалась Центром разведки флота ВМС США в Европе и Атлантике.

Model 204 десятилетиями была центральной частью системы социального обеспечения Австралии. Службы Австралии использовали ее для своей системы ISIS, которая выплачивает более 110 миллиардов долларов социальных выплат примерно 6 миллионам австралийцев. Ожидалось, что проект стоимостью 1,5 миллиарда австралийских долларов по замене ISIS будет завершен в 2022 году, но возникли задержки. Проект был свернут в июле 2023 года (потрачено свыше 191 миллиона AUD), при этом сложность кодирования правил выплаты пособий по социальному обеспечению в M204 была названа одной из причин его провала.

Данные таблицы показывают, что с самого момента создания этой БД пользователи с осторожностью и опаской обращались к её услугам (в силу связи с военными организациями):

![Текст с описанием картинки](/images4/HW4-5.png)

Намеченный тренд продолжится и в дальнейшем (а с 1983-го года уже тяжело проследить изменение пользовательского интереса к данной БД):

![Текст с описанием картинки](/images4/HW4-6.png)

Как видим, изначальные прогнозы по развитию данной СУБД оправдали себя и сегодня её можно с трудом заметить в неправительственных учреждениях:

![Текст с описанием картинки](/images4/HW4-7.png)
 
## Отличительные черты + язык, на котором напусана СУБД + используемый database engine

Model 204 воплощает в себе шесть уникальных черт, которые отличают ее от других СУБД и прикладных платформ. В совокупности они дают значительное преимущество при поддержке крупномасштабных сложных приложений:

* В M204 модель данных намного более гибкая, чем простой табличный формат, поддерживаемый реляционной моделью данных. Здесь записи могут напрямую хранить сложные объекты с древовидной структурой, не прибегая к дорогостоящим схемам отображения. M204 является единственной коммерческой реализацией модели данных Entity-Attribute (Сущность-Атрибут). Файл этой БД структурирован в записи, где запись представляет собой контейнер, который может содержать произвольные комбинации вхождений полей. Логически вхождения полей имеют вид field name = value. Файл может содержать несколько тысяч определений полей. Порядок появления полей поддерживается в записях.
* В Model 204 интегрирован язык четвертого поколения (4GL), специально разработанный для написания приложений с использованием высокопроизводительного DBMS engine (используется в Model 104). Пользовательский язык предоставляет элегантные операторы, такие как FOR EACH OCCURRENCE, для использования гибких структур данных, поддерживаемых M204. Тесная интеграция языка пользователя с Model 204 значительно упрощает разработку приложений, повышая производительность программистов.
* M204 обеспечивает хорошую технологию индексирования. Любое количество полей в файле может быть проиндексировано с использованием либо хэшированной структуры, либо сжатого B-дерева. Фактически, Model 204 впервые применил технику индексирования с помощью хэш-кодирования. Поскольку структуры индексирования базы данных были специально разработаны для поддержки сложных логических запросов, в отличие от поиска по одному ключу, M204 может эффективно выполнять чрезвычайно сложные логические операции в огромных базах данных. Преимущество в эффективности заключается прежде всего в том, что списки не сканируются. Поиск и обновление индексов по существу плоские в чрезвычайно широком диапазоне размеров файлов.
* Model 204 обеспечивает уникальную парадигму обработки, посредством которой программы могут напрямую манипулировать списками записей (PLACE, REMOVE ON, FIND и т.д.). Это основы средств обработки вывода, которые были частью исходной постановки задачи. Поскольку в этих операторах используются те же низкоуровневые структуры, что и в FIND для Model 204, они также чрезвычайно эффективны. Ближайшей аналогией этой конструкции в реляционной системе являются временные таблицы, которые далеко не так гибки или эффективны. Обработка списков радикально упрощает определенные операции, такие как перекрестные вкладки и типы запросов, используемые в интеллектуальном анализе данных и приложениях OLAPI.
* M204 демонстрирует превосходное управление памятью. В основном это следствие того факта, что первые версии Model 204 работали на машинах с ничтожно малыми объемами памяти. Однако жесткое управление памятью также было жизненно важным для достижения первоначальных целей масштабируемости. Побочный эффект управления памятью в сочетании с интеграцией пользовательского языка это что M204 может поддерживать очень большое количество одновременных транзакций. Это важное качество для веб-приложений, которым необходимо поддерживать чрезвычайно большие сообщества пользователей. Управление памятью обычно является одним из наиболее ограничивающих факторов для серверов приложений и веб-серверов.
* Model 204 кодируется на языке ассемблер, а не на языке высокого уровня. Этот простой факт дает M204 значительное преимущество в производительности по сравнению с конкурентами. Учитывая количество операций со строками и битовыми настройками, задействованных в движке СУБД, реализация Model 204 на C, вероятно, потребует в два-четыре раза больше CPU, чем текущая версия на языке ассемблер.

## Подытог + Характеристики

* Высокая доступность: Model 204 предназначена для обеспечения высокой доступности критически важных приложений. Система способна обрабатывать большие объемы данных и транзакций без простоев.
* Масштабируемость: система может масштабироваться для обработки больших объемов данных и пользователей без ущерба для производительности.
* Безопасность: БД Model 204 предоставляет надежные функции безопасности для защиты конфиденциальных данных от несанкционированного доступа.
* Скорость: система оптимизирована для быстрого и эффективного доступа к данным даже в средах с большим объемом транзакций.
* Гибкость: Model 204 поддерживает широкий спектр типов данных и может быть настроена для удовлетворения конкретных потребностей различных приложений.
* Интеграция: База данных Model 204 может быть интегрирована с другими технологиями, такими как языки программирования и инструменты анализа данных, для обеспечения комплексного решения для приложений корпоративного уровня.

Дополнительную информацию по Model 204 можно найти на официальном [сайте](https://www.rocketsoftware.com/products/rocket-m204).

## Где использовать?

* Финансовые услуги: M204 часто используется в приложениях финансовых услуг, таких как банковское дело и страхование, для управления большими объемами транзакционных данных.
* Правительственные организации (исторически использовалась): cистема также используется в государственных приложениях, таких как управление налогами и доходами, для обработки больших объемов данных и предоставления аналитики в режиме реального времени.
* Военные организации, где есть требования к безопасности (Model 204 хорошо дружит с безопасностью, т.к. изначально разрабатывалась для военных целей)
* Здравоохранение: БД Model 204 используется в приложениях здравоохранения для управления записями пациентов и другими конфиденциальными медицинскими данными.

## Немного о версиях
Т.к. Model 204 чаще всего используется в правительственных и военных организациях, то довольно трудно найти подробную информацию о конкретных версиях продукта, более того почти нет детальной информации по каждой из версий, поэтому обзорно проследим за ключевыми изменениями рассматриваемой СУБД (в основном информация взята [отсюда](https://web.archive.org/web/20130124071824/http://sirius-software.com/sug05/m20461.pdf)):

1) При выпуске новых версий разработчики уделяли внимание увеличению производительности M204 (в особенности скорости обработки транзакций), и как видим одна из самых используемых и современных версий этой БД 6.1 даже от предыдущей версии 5.1 отличается на целых 30% в количесвте транзакций, обрабатываемых в секунду, об отличии от более ранних версий даже и говорить не приходится:

![Текст с описанием картинки](/images4/HW4-8.png)

2) Не менее важным было и уменьшить количество используемых ресурсов процессора, по этому показателю видим также неплохое уменьшение на 20% по сравнению с предыдущей версией:

![Текст с описанием картинки](/images4/HW4-9.png)

3) А вот во времени ответа на запрос за последнее время не удалось так же значительно продвинуться, как в ранних версиях продукта (кардинальное уменьшение времени отклика на запрос видно лишь на версиях 2.2 и 3.2):

![Текст с описанием картинки](/images4/HW4-10.png)

## Инструменты для взаимодействия и возможности подключения

* Model 204 работает на мэйнфреймах IBM (IBM z/OS, z/VM, zVSE) 
* Доступен SQL интерфейс c поддержкой вложенных сущностей API: native 4GL (SOUL + o-o support), SQL, Host Language (COBOL, Assembler, PL1) API, ODBC, JDBC.
* Horizon интегрирует пользовательский язык со стандартными отраслевыми коммуникационными протоколами, такими как TCP / IP, что позволяет осуществлять коммуникацию на различных платформах.
*  Connect* обеспечивает подключение между Model 204 и системами Windows или UNIX с использованием либо стандартного языка запросов (SQL), либо удаленной командной строки (RCL).
* MQSeries взаимодействует с промежуточным программным обеспечением IBM для управления очередями запросов.
* WebGate обеспечивает веб-поддержку с трехуровневой архитектурой с использованием веб-сервера Windows NT.

Информация взята с [сайта](https://web.archive.org/web/20021118225714/http://www.cc.ysu.edu/ComputerServices/Newsletter/link0102/model204.htm).

## Язык запросов Model 204

Есть несколько вариантов написания запросов в M204:

1) Используя Model 204 SQL Server или установив через Connect* подключение между Model 204 и системами Windows или UNIX, можно писать запросы на стандартном SQL-подобном языке (синтаксис аналогичен), либо можно пользоваться и удаленной командной строкой (RCL).

2) В M204 был интегрирован элегантный и хорошо понятный знающему английский пользовательский язык 4 поколения (4GL), вот некоторые примеры его использования и запросов:

![Текст с описанием картинки](/images4/HW4-11.png)

Типичная структура кода:

![Текст с описанием картинки](/images4/HW4-13.png)

Использование %variables (в CCA все переменные должны быть объявлены в одной секции в начале процедуры или подпрограммы):

![Текст с описанием картинки](/images4/HW4-14.png)

Использование $functions:

![Текст с описанием картинки](/images4/HW4-15.png)

Также можно использовать и if-выражения:

![Текст с описанием картинки](/images4/HW4-16.png)

Если if-выражение кажется слишком сложным, можно использовать и JUMP TO:

![Текст с описанием картинки](/images4/HW4-17.png)

Также доступны и другие конструкции (подробнее можно почитать [здесь](https://vdocuments.mx/m204-appl-dev-guide.html?page=44)), а вот примеры запросов:

![Текст с описанием картинки](/images4/HW4-18.png)

![Текст с описанием картинки](/images4/HW4-19.png)

![Текст с описанием картинки](/images4/HW4-20.png)

## Индексация + пример распределения файлов (секционированная таблица)
 
Индексы в базе данных Model 204 играют важную роль для оптимизации производительности запросов и ускорения доступа к данным. Индекс представляет собой структуру данных, которая содержит отсортированные значения столбца таблицы и ссылки на соответствующие строки данных. При выполнении запросов, оптимизатор запросов может использовать индексы для быстрого поиска и извлечения данных. Без индекса Model 204 должна выполнить запрос, используя полное сканирование документа, что неэффективно.

Model 204 - одна из первых СУБД, в которых был реализован bitmap index (особый вид индексов для БД, который хранит большую часть своих данных в виде битовых массивов (bitmaps) и отвечает на большинство запросов, выполняя побитовые логические операции с этими bitmaps):

### Преимущества bitmap индексов:
* Сокращение времени отклика: bitmap индексы используются для сокращения времени отклика на большинство сложных запросов.
* Сокращение объема памяти: bitmap индексы будут храниться в небольшой области памяти по сравнению с другими индексами.
* Меньшие требования к оборудованию: bitmap индексы полезны для повышения производительности приложения при меньших требованиях к оборудованию.
* Эффективное обслуживание: bitmap индекс используется для эффективного обслуживания.

Большинство преимуществ bitmap index следуют из того, что создается двумерный массив для каждой строки в индексируемом столбце таблицы, что значительно сокращает использование дополнительного пространства для хранения самого индекса. Выходит, обычный индекс создаст список идентификаторов строк, а bitmap индексы создадут растровую карту для каждого значения ключа. Чаще всего bitmap индексы используют в запросах, содержащих несколько условий в одном и том же формате.

### Где использовать bitmap индексы
* Когда количество различных значений находится в диапазоне от 1 до 10: когда существует от 1 до 10 различных значений, bitmap индексы очень полезны (это значительно повысит производительность запроса).
* Когда количество различных значений находитсянаходятся в диапазоне от 10 до 100: когда существует от 10 до 100 различных значений, пользователь все еще может использовать bitmap индекс, но это будет иметь более низкую производительность, чем в предыдущем пункте.
* Когда количество различных значений больше 100: если существует более 100 различных значений, не рекомендуется использовать bitmap индексы, т.к. это значительно снизит производительность запросов.

### Примеры использования индексов
1) Bitmap индексы в data-warehouse: bitmap индексы часто используются в data-warehouse, т.к. запросы отчетов являются наиболее сложными запросами и в них оказываются полезными bitmap индексы. Допустим, есть where-условие, в котором есть столбец grade, содержащий различные значения A, B, C, D. Столбец grade находится в таблице Student, которая содержит сотни значений, поэтому создадим bitmap индекс для этого столбца, чтобы повысить производительность запроса:

![Текст с описанием картинки](/images4/HW4-21.png)

Запрос выше создаст в таблице Student bitmap индекс

#### Немного о секционированных таблицах в M204

Основные преимущества секционированных таблиц:

* Быстро и эффективно переносить подмножества данных и обращаться к ним, сохраняя при этом целостность набора данных
* Операции обслуживания можно выполнять быстрее с одной или несколькими секциями
* Можно повысить скорость выполнения запросов в зависимости от запросов, которые часто выполняются в вашей конфигурации оборудования

Другими словами, секционирование (а в Model 204 реализованно классическое секционирование, как и, например, в SQL Server) применяется для горизонтального масштабирования. Таблица/индексы «размазываются» по разным файловым группам, которые могут находиться на разных физических дисках, что значительно повышает удобство администрирования и, теоретически, позволяет повысить производительность запросов к этим данным – можно либо читать только нужную секцию (меньше данных), либо читать всё параллельно (устройства разные, читается быстро). Практически же, всё несколько сложнее и повышение производительности запросов к секционированным таблицам может работать только в том случае, если в ваших запросах используется отбор по тому полю, по которому вы проводили секционирование.

2) Bitmap индексы в секционированной таблице: рекомендуется создавать bitmap индексы в секционированных таблицах, но стоит убедиться, что эти индексы будут локальными. Допустим, таблица Student является секционированной таблицей, и пользователю необходимо создать индекс в столбце grade. Тогда необходимо использовать ключевое слово local для создания индекса:

![Текст с описанием картинки](/images4/HW4-22.png)

3) Bitmap индекс для операций JOIN: можно создавать составные bitmap индексы для объединяемых таблиц. Допустим, есть две таблицы Student и Student_Master, которые содержат столбцы Grade и Marks.Условием объединения будет Student_id. Тогда будет полезен следующий индекс:

![Текст с описанием картинки](/images4/HW4-23.png)

Здесь стоит еще раз перепроверить, что индекс будет создан для не болеее чем 100 различных значений.

4) Bitmap индекс для условия IS NULL: bitmap индексы могут быть полезны при наличии условия IS NULL, опять же нужно убедиться, что количество различных значений меньше 100:

![Текст с описанием картинки](/images4/HW4-24.png)

Если здесь окажется, что count <= 100, то можно смело использовать bitmap индекс.

### Остальные индексы

Помимо рассмотренного bitmap индекса в Model 204 реализованы и другие виды индексов, включая одиночные индексы, составные индексы и уникальные индексы. Одиночный индекс создается для одного столбца таблицы, что позволяет быстро находить значения этого столбца. Пример создания одиночного индекса:

CREATE INDEX index_name ON table_name(column_name);

Составной индекс создается для комбинации нескольких столбцов таблицы. Он позволяет оптимизировать запросы, которые используют условия на несколько столбцов. Пример создания составного индекса:

CREATE INDEX index_name ON table_name(column1, column2);

Уникальный индекс гарантирует уникальность значений в столбце или комбинации столбцов. При попытке вставить дублирующееся значение, будет сгенерировано сообщение об ошибке. Пример создания уникального индекса:

CREATE UNIQUE INDEX index_name ON table_name(column_name);

Использование индексов в Model 204 позволяет значительно ускорить выполнение запросов, особенно при работе с большими объемами данных. Рекомендуется создавать индексы для часто используемых столбцов и комбинаций столбцов, чтобы повысить производительность системы и сократить время выполнения запросов.

## Процесс выполнения запросов + понятие "план запросов" + еще немного о распределении файлов БД по разным носителям

Для выполнения запросов и поддержания "плана запросов" (непосредственно этого термина в Model 204 нет, но есть связанное с этим понятие Question Bank, которое используется для выполнения запросов).

### Инициализация Question Bank + файловая структура

Процесс создания Question Bank в Model 204 довольно сложен, и несоблюдение надлежащей практики может быть дорогостоящим и отнимать много времени. Детальное описание процесса создания Question Bank приведено в главе 3 File Manager's Technical Reference Manual. Некоторые параметры и размеры таблиц в значительной степени зависят от фактических записей данных, поэтому фактические процедуры расчета здесь пропущены. Для более глубокого ознакомления с расчетами загрузки можно обратиться к вышеприведенному руководству. Параметры файла
задаются в File Control Table с помощью команды CREATE. Затем файл должен быть инициализирован командой INITIALIZE, чтобы удалить всю информацию, хранящуюся в файле, за исключением самих параметров настройки. Далее файл необходимо инициализировать командой INITIALIZE, чтобы удалить всю информацию, хранящуюся в файле, за исключением настройки параметров файла. Чтобы убедиться в том, что входные данные правильно отформатированы и запросы будут работать должным образом, необходимо выполнить следующие действия:

1) Проверить формат введенных данных, желательно использовать выборку данных с помощью инструкции P в Fast Load Utility (FLOD), чтобы вывести выборку данных на экран.
2) Запустить FLOD для загрузки образцов данных и создания записей в файле Model 204.
3) После загрузки записей нужно выполнить команду DISPLAY FIELD и затем уже использовать пользовательский язык M204 для отображения всех данных. Это помогает проверить правильность
определения имен полей и то, что данные действительно загружены в файл Model 204.
4) Прежде чем приступить к фактическому выполнению запроса, необходимо оценить время выполнения и рабочее пространство хранилища. Точной формулы для расчета времени, необходимого для выполнения запроса, не существует. Наиболее надежным методом оценки является использование выборочного времени загрузки для экстраполяции значения. Рабочее хранилище может быть оценено по количеству индексов отложенного обновления, полученных при загрузке выборки.

### Поддержание Question bank + существующие методы восстановления после сбоев + файловая структура

Для поддержания Question bank в Model 204 предусмотрены некоторые вспомогательные процедуры. При создании файла точные требования к объему редко известны. После создания размеры таблиц не могут быть изменены без повторного создания файла и перезагрузки всех данных. Размеры таблиц все же можно изменить, используя свободное пространство, с помощью команд INCREASE и DECREASE. Объем свободного пространства может быть увеличен с помощью команды INCREASE DATASETS.

Одна из самых важных для поддержания Question bank команда DUMP создает резервную копию файла Model 204 в виде последовательного набора данных в определенный момент времени. Этот
набор данных может храниться либо на магнитной ленте, либо на устройстве прямого доступа. Команда RESTORE использует набор данных из резервной копии, созданный командой DUMP, и снова преобразует его в файл Model 204. Эти команды предоставляют пользователю возможность восстановления после сбоев диска (возможно, потерянные запросы), сбоев операционной системы
и случайного удаления наборов данных. Кроме того, это также позволяет пользователю перемещать файл с одного устройства на другое и переименовывать файл. Команды сброса и восстановления можно использовать в специальной пакетной программе. Более подробную информацию можно найти в File Manager's Technical Reference Manual.

## Транзакции

В M204 реализованы классические транзакции (очень схожи с транзакциями в другой multivalue СУБД jBASE). Напомним еще раз базовую информацию о транзакциях и приведем пример их использования на практике.

Транзакции базы данных представляют собой группу логически связанных обновлений или инструкций. Эти обновления предназначены для обработки как единое целое и не могут быть выполнены частично, поэтому для обеспечения согласованности базы данных в транзакции должны выполняться все обновления или не выполняться ни одно из них. Например, предположим, что существует инструкция, по которой банку необходимо списать со счета клиента A 500 долларов и зачислить на счет клиента B сумму арендной платы за жилье, подлежащую оплате A в пользу B. Это должно происходить 1-го числа каждого месяца. В ходе вышеупомянутой транзакции необходимо выполнить две важные задачи. Одной из них является списание со счета клиента A суммы в 500 долларов, другой - зачисление на счет клиента B суммы в 500 долларов. Важно, чтобы были выполнены обе вышеупомянутые задачи или ни одна из них не была выполнена. Если произойдет только одна из них, это приведет к несогласованности базы данных.

### Границы транзакций и блокировка
Обновления внутри блока транзакций обычно требуют блокировки базы данных, чтобы предотвратить несоответствия, возникающие из-за того, что разные пользователи одновременно обновляют одну и ту же запись. Очевидно, что если эти блокировки сохраняются в течение длительного времени, доступ к базе данных может быть затруднен. Поэтому блокировка реализована так, чтобы блокировки удерживались только при записи в базу данных и, конечно же, не при ожидании ввода данных пользователем.

### Обработка транзакций и ведение журнала транзакций
Как указывалось ранее, транзакция представляет собой группу логически связанных обновлений файлов СУБД. Возьмем вышеупомянутый пример с банковской деятельностью и введем граничные маркеры транзакций:

![Текст с описанием картинки](/images4/HW4-25.png)

(i) Команда TRANSTART приводит к тому, что запись TRANSTART помещается в кэш транзакций для этого пользователя. (ii) и (iii) записи “WRITE”, содержащие не только данные самой записи, но и подробную информацию об источнике обновлений, кэшируются после записи “TRANSTART”. (iv) Команда TRANSEND переводит процесс в фазу выполнения “COMMIT”. До этого момента данные не записывались ни в журнал транзакций, ни в базу данных. Затем выполняется следующая процедура:

![Текст с описанием картинки](/images4/HW4-26.png)

Другие примеры использования транзакций в Model 204:

BEGIN TRANSACTION;
UPDATE employees SET salary = salary * 1.1 WHERE department = 'IT';
INSERT INTO audit_log (action, table_name, timestamp) VALUES ('UPDATE', 'employees', CURRENT_TIMESTAMP);
COMMIT;

В данном примере мы начинаем транзакцию с помощью команды BEGIN TRANSACTION, затем выполняем обновление данных в таблице employees, увеличивая зарплату сотрудников отдела IT на 10%. После этого мы добавляем запись в таблицу audit_log, отслеживая действие и таблицу, к которой было применено изменение. Наконец, мы завершаем транзакцию с помощью команды COMMIT, что фиксирует все изменения в базе данных.

Если в процессе выполнения транзакции происходит ошибка или откат изменений необходим, можно использовать команду ROLLBACK:

BEGIN TRANSACTION;
DELETE FROM orders WHERE status = 'cancelled';
INSERT INTO audit_log (action, table_name, timestamp) VALUES ('DELETE', 'orders', CURRENT_TIMESTAMP);
ROLLBACK;


В этом примере мы начинаем транзакцию, удаляем отмененные заказы из таблицы orders, добавляем соответствующую запись в таблицу audit_log, а затем откатываем транзакцию с помощью команды ROLLBACK, чтобы отменить все изменения.

Использование транзакций в Model 204 позволяет обеспечить надежность и целостность данных, предотвращая ошибки и сохраняя консистентность информации в базе данных. Рекомендуется правильно управлять транзакциями для обеспечения безопасности и надежности работы с данными.

## Шардинг

Шардинг - это техника горизонтального масштабирования баз данных, которая позволяет разбить данные на несколько фрагментов (шардов) и хранить их на разных серверах. Это увеличивает производительность и возможность обработки большого объема данных.

В Model 204 шардинг реализуется через использование секционированных таблиц, о которых было рассказано выше. Не стоит забывать, что в Model 204 необходимо явно указывать, к какому именно шарду необходимо применить запрос.

Важно отметить, что M204 не поддерживает автоматический балансировщик нагрузки между шардами, поэтому это должно быть реализовано вручную.

## Data Mining, Data Warehousing и OLAP

Термины Data Mining, Data Warehousing и OLAP относятся к области анализа данных и хранения данных. В случае Model 204  не все эти термины применимы.

Data Mining (добыча данных) - это процесс извлечения практически полезной информации из большого объема данных. M204 не предоставляет встроенных средств для анализа данных или добычи данных, т.к. была реализована довольно давно, когда такого понятия еще не было. Однако, если необходимо выполнить анализ данных, данные могут быть извлечены из Model 204 и переданы для обработки в другие инструменты для Data Mining.

Data Warehousing (хранилище данных) - это процесс сбора, хранения и управления данными из разных источников, чтобы обеспечить быстрый и удобный доступ к этим данным для аналитических целей. К Model 204 применимо такое понятие, о чем было рассказано выше в секции про распределение файлов. 

OLAP (Online Analytical Processing) - это технология анализа данных, которая позволяет анализировать большие объемы данных в реальном времени. M204 не имеет встроенных средств для анализа данных OLAP. Однако, если необходимо выполнить OLAP-анализ, данные могут быть извлечены из Model 204 и переданы для обработки в другие инструменты для OLAP.

Таким образом, хотя Model 204 может использоваться для хранения данных, он не является полноценным инструментом для анализа данных и OLAP-анализа.

## Методы защиты в Model 204

В силу места использования рассматриваемой СУБД, в ней реализованы одни из самых лучших методов защиты, полной информации о которых в открытом доступе нет. Известно лишь, что в Model 204 реализовано 7 уровней защиты а также интерфейсы для общесистемного программного обеспечения безопасности сторонних производителей. Когда вы входите в Model 204, система безопасности RACF компании YSU запускается через интерфейс для аутентификации вашего идентификатора пользователя и пароля. Система безопасности Model 204 проверяет ваш доступ к таким подсистемам, как PATRON или PERMREC. Т.к. доступно не так много открытой информации, рассмотрим один из самых ранних и не самых сложных механизмов защиты CCASTAT, хотя стоит еще раз отметь, что защита в этой БД реализована намного сложнее.

### Механизм защиты CCASTAT

* Ранее были реализованы опциональные фичи CCASTAT, которые делали фозможным использовать эту защиту в интерфейсном режиме
* Проводится трекинг дней, когда пароль все еще валидный:

#### Истечение срока действия пароля CCASTAT

***EXP*** - количество дней, в течение которых пользователь может войти в систему, используя один и тот же пароль.
***WARN*** - количество дней до истечения срока действия пароля, причем пользователь получает предупреждающее сообщение:
***M204.2634: YOUR PASSWORD WILL EXPIRE IN n DAYS

#### Очистка User ID

***PURGE*** - количество дней, в течение которых идентификатор пользователя с истекшим сроком действия находится в режиме ожидания нового пароля от System Manager.

* После трех неудачных попыток ввода пароля пароль будет аннулирован, но его можно поменять до наступления purge date

Так осуществляется процесс авторизации:

![Текст с описанием картинки](/images4/HW4-27.png)

## Сообщество Model 204

Большого объема информации о сообществе Model 204 неизвесто, можно только сказать, что ее разработкой занимается большая и бурно развивающаяся компания [Rocket](https://www.rocketsoftware.com/)